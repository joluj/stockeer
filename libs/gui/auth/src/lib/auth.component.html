<ion-card>
  <ion-card-header>
    <ion-card-title> Authentication </ion-card-title>
  </ion-card-header>

  <ion-card-content>
    <form [formGroup]="form" (ngSubmit)="submit()" (keyup.enter)="submit()">
      <ion-item class="ion-invalid">
        <ion-label position="floating">Username</ion-label>
        <ion-input
          enterkeyhint="next"
          [formControl]="form.controls.username"
        ></ion-input>
        <ion-note *ngIf="form.controls.username.touched" slot="error">
          Username must be at least 5 chars long
        </ion-note>
      </ion-item>

      <ion-item>
        <ion-label position="floating">Password</ion-label>
        <ion-input
          type="password"
          [enterkeyhint]="state === 'register' ? 'next' : 'send'"
          [formControl]="form.controls.password"
        ></ion-input>
        <ion-note *ngIf="form.controls.password.touched" slot="error">
          Passwords must be at least 8 chars long
        </ion-note>
      </ion-item>

      <stockeer-smooth-height [trigger]="state">
        <ion-item [hidden]="state === 'login'">
          <ion-label position="floating">Repeat Password</ion-label>
          <ion-input
            type="password"
            enterkeyhint="send"
            [formControl]="form.controls.repeatPassword"
            [class.ion-invalid]="form.errors"
          ></ion-input>
          <ion-note slot="error"> Passwords must match </ion-note>
        </ion-item>
      </stockeer-smooth-height>

      <ion-button class="login-auth-button" expand="block" type="submit">
        <div style="position: absolute" *ngIf="state === 'login'" @fadeInOut>
          Login
        </div>
        <div style="position: absolute" *ngIf="state === 'register'" @fadeInOut>
          Register
        </div>
      </ion-button>
    </form>

    <ng-container [ngSwitch]="state">
      <ng-container *ngSwitchCase="'login'">
        New to stockeer?
        <a routerLink="#" (click)="state = 'register'">Create an account</a>.
      </ng-container>
      <ng-container *ngSwitchCase="'register'">
        Already have an account?
        <a routerLink="#" (click)="state = 'login'">Sign in</a>.
      </ng-container>
    </ng-container>
  </ion-card-content>
</ion-card>
